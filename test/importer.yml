- name: noop
  node: false
  input: |
    console.log("This is a test");
  expected: |
    console.log("This is a test");

- name: noop-local-variable
  node: false
  input: |
    let fs = { readFile: () => {} };
    fs.readFile();
  expected: |
    let fs = { readFile: () => {} };
    fs.readFile();

- name: noop-existing-require
  node: false
  input: |
    const fs = require("fs");
    fs.readFile();
  expected: |
    const fs = require("fs");
    fs.readFile();

- name: noop-empty
  node: false
  input: ""
  expected: "\n"

- name: prepend
  node: true
  input: |
    fs.readFile();
  expected: |
    const fs = require("fs");

    fs.readFile();

- name: prepend-quote
  node: true
  input: |
    fs.readFile('example.txt');
  expected: |
    const fs = require('fs');

    fs.readFile('example.txt');

- name: prepend-no-semicolon
  node: true
  input: |
    fs.readFile()
  expected: |
    const fs = require("fs")

    fs.readFile()

- name: prepend-kind
  node: true
  input: |
    let filename = "example.txt";
    fs.readFile(filename);
  expected: |
    let fs = require("fs");

    let filename = "example.txt";
    fs.readFile(filename);

- name: prepend-all
  node: true
  input: |
    var path = '/tmp/example.txt'
    fs.readFile(path)

  expected: |
    var fs = require('fs')

    var path = '/tmp/example.txt'
    fs.readFile(path)

- name: append
  node: true
  input: |
    const fs = require("fs");

    fs.readFile();
    util.inspect({});
  expected: |
    const fs = require("fs");
    const util = require("util");

    fs.readFile();
    util.inspect({});

- name: append-quote
  node: true
  input: |
    const fs = require('fs');

    fs.readFile();
    util.inspect({});
  expected: |
    const fs = require('fs');
    const util = require('util');

    fs.readFile();
    util.inspect({});

- name: append-no-semicolon
  node: true
  input: |
    const fs = require("fs")

    fs.readFile()
    util.inspect({})
  expected: |
    const fs = require("fs")
    const util = require("util")

    fs.readFile()
    util.inspect({})

- name: append-kind
  node: true
  input: |
    let fs = require("fs");

    fs.readFile();
    util.inspect({});
  expected: |
    let fs = require("fs");
    let util = require("util");

    fs.readFile();
    util.inspect({});

- name: append-all
  node: true
  input: |
    var fs = require('fs')

    fs.readFile()
    util.inspect({})
  expected: |
    var fs = require('fs')
    var util = require('util')

    fs.readFile()
    util.inspect({})

- name: remove
  node: false
  input: |
    const fs = require("fs");
    console.log("Hello");
  expected: |
    console.log("Hello");

- name: remove-empty
  node: false
  input: |
    const fs = require("fs");
  expected: "\n"

- name: remove-only-requires
  node: false
  input: |
    const fs = require("fs");
    const x = 3;
  expected: |
    const x = 3;

- name: remove-multiple
  node: false
  input: |
    const fs = require("fs");
    const util = require("util");
    const http = require("http");

    util.inspect({});
  expected: |
    const util = require("util");

    util.inspect({});

- name: remove-and-append
  node: true
  input: |
    const fs = require("fs");
    const util = require("util");

    util.inspect({});
    http.createServer();
  expected: |
    const http = require("http");
    const util = require("util");

    util.inspect({});
    http.createServer();

- name: remove-namespaced
  node: false
  input: |
    const JsonFile = require("@exponent/json-file");
  expected: "\n"

- name: remove-default
  node: false
  input: |
    const es6 = require("../fixtures/es6.js").default;
  expected: "\n"

- name: keep-rewrite
  node: false
  input: |
    let fs = require("fs");
    fs = {};
  expected: |
    let fs = require("fs");
    fs = {};

- name: keep-multiple-declarators
  node: false
  input: |
    const fs = require("fs"), util = require("util");

    fs.readFile();
  expected: |
    const fs = require("fs"), util = require("util");

    fs.readFile();

- name: keep-same-line-code-before
  node: false
  input: |
    const x = 3; const fs = require("fs");
    /* some comment */ const util = require("util");
  expected: |
    const x = 3; const fs = require("fs");
    /* some comment */ const util = require("util");

- name: keep-same-line-code-after
  node: false
  input: |
    const fs = require("fs"); const x = 3;
    const util = require("util"); // some comment
  expected: |
    const fs = require("fs"); const x = 3;
    const util = require("util"); // some comment

- name: keep-namespaced
  node: false
  input: |
    const JsonFile = require("@exponent/json-file");
    new JsonFile();
  expected: |
    const JsonFile = require("@exponent/json-file");
    new JsonFile();

- name: keep-relative
  node: false
  input: |
    const DepRegistry = require("../lib/dep-registry.js");
    const runner = require("./runner.js");
    const stub = require("./dir/stub.js");

    new DepRegistry();
    runner.run();
    console.log(stub);
  expected: |
    const DepRegistry = require("../lib/dep-registry.js");
    const runner = require("./runner.js");
    const stub = require("./dir/stub.js");

    new DepRegistry();
    runner.run();
    console.log(stub);

- name: keep-default
  node: false
  input: |
    const stub = require("stub").default;
    console.log(stub);
  expected: |
    const stub = require("stub").default;
    console.log(stub);

- name: keep-react-for-jsx
  node: false
  input: |
    const React = require("react");
    <p>Paragraph</p>;
  expected: |
    const React = require("react");
    <p>Paragraph</p>;

- name: keep-jsx-ident
  node: false
  input: |
    const React = require("react");

    const Component = require("../fixtures/component.js");

    <Component />;
  expected: |
    const React = require("react");

    const Component = require("../fixtures/component.js");

    <Component />;

- name: keep-inner-scope
  node: false
  input: |
    const util = require("util");

    function foo() {
      const fs = require("fs");
      fs.readFile();
    }

    util.inspect();
  expected: |
    const util = require("util");

    function foo() {
      const fs = require("fs");
      fs.readFile();
    }

    util.inspect();

- name: keep-order
  node: false
  input: |
    const fs = require("fs");
    const JsonFile = require("@exponent/json-file");
    const util = require("util");

    const findImports = require("../rules/find-imports.js");
    const parser = require("../lib/parser.js");

    util.inspect({});
    fs.readFile();
    parser.run();
    findImports.retrieve();
    new JsonFile();
  expected: |
    const fs = require("fs");
    const JsonFile = require("@exponent/json-file");
    const util = require("util");

    const findImports = require("../rules/find-imports.js");
    const parser = require("../lib/parser.js");

    util.inspect({});
    fs.readFile();
    parser.run();
    findImports.retrieve();
    new JsonFile();

- name: multi-ident
  node: true
  input: |
    child_process.exec();
    childProcess.spawn();
  expected: |
    const childProcess = require("child_process");
    const child_process = require("child_process");

    child_process.exec();
    childProcess.spawn();

- name: default
  node: false
  input: |
    console.log(es6);
  expected: |
    const es6 = require("../fixtures/es6.js").default;

    console.log(es6);

- name: default-anonymous
  node: false
  input: |
    console.log(defaultAnonymous);
  expected: |
    const defaultAnonymous = require("../fixtures/default-anonymous.js").default;

    console.log(defaultAnonymous);

- name: react-for-jsx
  node: false
  input: |
    <p>Paragraph</p>;
  expected: |
    const React = require("react");

    <p>Paragraph</p>;

- name: jsx-ident
  node: false
  input: |
    <Component />;
  expected: |
    const React = require("react");

    const Component = require("../fixtures/component.js");

    <Component />;

- name: no-dupes
  node: true
  input: |
    fs.readFile();
    fs.createReadStream();
    fs.createWriteStream();
  expected: |
    const fs = require("fs");

    fs.readFile();
    fs.createReadStream();
    fs.createWriteStream();

- name: prop
  node: false
  input: |
    readFile();
  expected: |
    const { readFile } = require("../lib/common.js");

    readFile();

- name: prop-multiple
  node: false
  input: |
    readFile();
    readdir();
  expected: |
    const { readFile, readdir } = require("../lib/common.js");

    readFile();
    readdir();

- name: prop-wrap
  node: true
  input: |
    readFileSync();
    readdirSync();
    createReadStream();
    createWriteStream();
  expected: |
    const {
      createReadStream,
      createWriteStream,
      readFileSync,
      readdirSync
    } = require("fs");

    readFileSync();
    readdirSync();
    createReadStream();
    createWriteStream();

- name: prop-wrap-four-spaces
  node: true
  input: |
    readFileSync();
    readdirSync();
    createReadStream();

    if (true) {
        createWriteStream();
    }
  expected: |
    const {
        createReadStream,
        createWriteStream,
        readFileSync,
        readdirSync
    } = require("fs");

    readFileSync();
    readdirSync();
    createReadStream();

    if (true) {
        createWriteStream();
    }

- name: prop-wrap-hard-tab
  node: true
  input: |
    readFileSync();
    readdirSync();
    createReadStream();

    if (true) {
    	createWriteStream();
    }
  expected: |
    const {
    	createReadStream,
    	createWriteStream,
    	readFileSync,
    	readdirSync
    } = require("fs");

    readFileSync();
    readdirSync();
    createReadStream();

    if (true) {
    	createWriteStream();
    }

- name: prop-wrap-trailing-comma
  node: true
  input: |
    readFileSync();
    readdirSync();
    createReadStream();
    createWriteStream();

    console.log({
      a: 3,
      b: 4,
    })
  expected: |
    const {
      createReadStream,
      createWriteStream,
      readFileSync,
      readdirSync,
    } = require("fs");

    readFileSync();
    readdirSync();
    createReadStream();
    createWriteStream();

    console.log({
      a: 3,
      b: 4,
    })

- name: prop-existing
  node: false
  input: |
    const { readFile, readdir } = require("../lib/common.js");

    readFile();
    readdir();
  expected: |
    const { readFile, readdir } = require("../lib/common.js");

    readFile();
    readdir();

- name: prop-remove
  node: false
  input: |
    const { readFile } = require("fs");
    console.log("Hello");
  expected: |
    console.log("Hello");

- name: prop-remove-existing
  node: false
  input: |
    const { readFile, readdir } = require("fs");
    readFile();
  expected: |
    const { readFile } = require("fs");
    readFile();

- name: pkg
  node: false
  input: |
    eslint.lint();
  expected: |
    const eslint = require("eslint");

    eslint.lint();

- name: pkg-dev
  node: false
  input: |
    ava.test();
  expected: |
    const ava = require("ava");

    ava.test();

- name: pkg-capital
  node: false
  input: |
    new Eslint();
  expected: |
    const Eslint = require("eslint");

    new Eslint();

- name: pkg-camel
  node: false
  input: |
    jsYaml.load();
  expected: |
    const jsYaml = require("js-yaml");

    jsYaml.load();

- name: pkg-namespaced
  node: false
  input: |
    new JsonFile();
  expected: |
    const JsonFile = require("@exponent/json-file");

    new JsonFile();

- name: pkg-path
  node: false
  input: |
    const stub = require("eslint/stub");
    console.log(stub);
  expected: |
    const stub = require("eslint/stub");
    console.log(stub);

- name: order
  node: false
  input: |
    const util = require("util");
    const fs = require("fs");

    util.inspect({});
    fs.readFile();
    parser.run();
    findImports.retrieve();
    new JsonFile();
  expected: |
    const fs = require("fs");
    const JsonFile = require("@exponent/json-file");
    const util = require("util");

    const findImports = require("../rules/find-imports.js");
    const parser = require("../lib/parser.js");

    util.inspect({});
    fs.readFile();
    parser.run();
    findImports.retrieve();
    new JsonFile();

- name: relative
  node: false
  input: |
    new DepRegistry();
  expected: |
    const DepRegistry = require("../lib/dep-registry.js");

    new DepRegistry();

- name: relative-prop
  node: false
  input: |
    lint();
  expected: |
    const { lint } = require("../lib/common.js");

    lint();

- name: relative-base
  node: false
  input: |
    parser.run()
  expected: |
    const parser = require("../lib/parser.js")

    parser.run()

- name: relative-base-recursive
  node: false
  input: |
    findExports.retrieve();
  expected: |
    const findExports = require("../rules/find-exports.js");

    findExports.retrieve();

- name: import-ident
  node: true
  input: |
    import * as fs from "fs";

    fs.readFile();
    util.inspect({});
  expected: |
    import * as fs from "fs";
    import * as util from "util";

    fs.readFile();
    util.inspect({});

- name: import-default
  node: false
  input: |
    import * as fs from "fs";

    fs.readFile();
    console.log(es6);
  expected: |
    import * as fs from "fs";

    import es6 from "../fixtures/es6.js";

    fs.readFile();
    console.log(es6);

- name: import-prop
  node: true
  input: |
    import * as fs from "fs";

    fs.readFile();
    inspect({});
  expected: |
    import * as fs from "fs";
    import { inspect } from "util";

    fs.readFile();
    inspect({});

- name: import-ident-prop
  node: true
  input: |
    import * as fs from "fs";

    fs.readFile();
    util.inspect();
    inherits();
  expected: |
    import * as fs from "fs";
    import * as util, { inherits } from "util";

    fs.readFile();
    util.inspect();
    inherits();

- name: import-default-prop
  node: false
  input: |
    import * as fs from "fs";

    fs.readFile();
    console.log(es6);
    prop();
  expected: |
    import * as fs from "fs";

    import es6, { prop } from "../fixtures/es6.js";

    fs.readFile();
    console.log(es6);
    prop();

- name: import-remove
  node: false
  input: |
    import * as fs from "fs";
    import { inspect, inherits } from "util";
    import es6 from "../fixtures/es6.js";

    inspect({});
  expected: |
    import { inspect } from "util";

    inspect({});

- name: import-multi-ident
  node: true
  input: |
    import * as fs from "fs";

    fs.readFile();
    child_process.exec();
    childProcess.spawn();
  expected: |
    import * as childProcess from "child_process";
    import * as child_process from "child_process";
    import * as fs from "fs";

    fs.readFile();
    child_process.exec();
    childProcess.spawn();

- name: import-namespaced
  node: false
  input: |
    import * as fs from "fs";

    fs.readFile();
    new JsonFile();
  expected: |
    import * as fs from "fs";
    import * as JsonFile from "@exponent/json-file";

    fs.readFile();
    new JsonFile();
